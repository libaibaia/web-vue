var Q=Object.defineProperty;var j=(a,i,p)=>i in a?Q(a,i,{enumerable:!0,configurable:!0,writable:!0,value:p}):a[i]=p;var h=(a,i,p)=>(j(a,typeof i!="symbol"?i+"":i,p),p);import{h as G,r as C,K as w,z as J,L as X,l as E,o as r,q as t,C as s,M as Y,N as Z,t as c,O as ee,P as te,p as b,Q as ae,R as oe,k as u,B as R,S as ne,T as L,U as M,E as se}from"./vue-a98ef309.js";import{_ as le,a as ie}from"./avatar-520fefc6.js";import{u as ce,a as re,b as de,c as P,d as ue,r as pe,e as me,_ as he}from"./index-0c819fdc.js";import{l as fe}from"./index-3be7818d.js";import{b as f}from"./validate-594baa03.js";import"./IRequests-783be2cd.js";const e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},_e=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let a=0;a<e.width*.5;a++){const i=new ge;e.circles.push(i)}B(),we()};function S(){e.animate=!(document.body.scrollTop>e.height)}function q(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function B(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const a in e.circles)e.circles[a].draw()}e.requestId=requestAnimationFrame(B)}class ge{constructor(){h(this,"pos");h(this,"alpha");h(this,"scale");h(this,"velocity");h(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function we(){window.addEventListener("scroll",S),window.addEventListener("resize",q)}function be(){window.removeEventListener("scroll",S),window.removeEventListener("resize",q),cancelAnimationFrame(e.requestId)}const I=a=>(ee("data-v-6d0f9eea"),a=a(),te(),a),ve={class:"switch-language"},ye=I(()=>r("canvas",{id:"bubble-canvas",class:"bubble-canvas"},null,-1)),xe=[ye],ke={class:"login"},Ce={class:"login-box"},Ie=I(()=>r("div",{class:"head"},[r("img",{src:le,alt:""})],-1)),Ve={class:"form"},ze=I(()=>r("img",{class:"profile-avatar",src:ie,alt:""},null,-1)),Ee={class:"content"},Re=["src"],Le=G({__name:"login",setup(a){var i;const p=ce();re();const _=C({showCaptcha:!1,captchaId:P()}),v=()=>{o.captcha="",_.captchaId=P()},y=w(),U=w(),N=w(),T=w(),o=C({username:"",password:"",captcha:"",keep:!1,loading:!1,captcha_id:""}),{t:d}=de(),A=C({username:[f({name:"required",message:d("login.Please enter an account")}),f({name:"account"})],password:[f({name:"required",message:d("login.Please input a password")}),f({name:"password"})],captcha:[f({name:"required",title:d("login.Please enter the verification code")}),{min:3,max:6,message:d("login.The verification code length must be between 4 and 6 bits"),trigger:"blur"}]});J(()=>{i=setTimeout(()=>{_e()},1e3)}),X(()=>{clearTimeout(i),be()});const V=x=>{x&&x.validate(n=>{if(n)o.loading=!0,o.captcha_id=_.captchaId,fe("post",o).then(m=>{o.loading=!1,window.localStorage.setItem("Authorization",m.data.tokenValue),se({message:m.msg,type:"success"}),pe.push({path:"/admin/ak"})}).catch(()=>{v(),o.loading=!1});else return v(),!1})};return(x,n)=>{const m=c("Icon"),$=c("el-dropdown-item"),D=c("el-dropdown-menu"),F=c("el-dropdown"),k=c("el-input"),g=c("el-form-item"),z=c("el-col"),H=c("el-row"),K=c("el-checkbox"),W=c("el-button"),O=c("el-form");return b(),E("div",null,[r("div",ve,[t(F,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:s(()=>[t(D,{class:"chang-lang"},{default:s(()=>[(b(!0),E(ae,null,oe(u(p).lang.langArray,l=>(b(),R($,{key:l.name,onClick:Me=>u(me)(l.name)},{default:s(()=>[L(M(l.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[t(m,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),r("div",{onContextmenu:n[0]||(n[0]=Y(()=>{},["stop"])),id:"bubble",class:"bubble"},xe,32),r("div",ke,[r("div",Ce,[Ie,r("div",Ve,[ze,r("div",Ee,[t(O,{onKeyup:n[6]||(n[6]=Z(l=>V(y.value),["enter"])),ref_key:"formRef",ref:y,rules:A,size:"large",model:o},{default:s(()=>[t(g,{prop:"username"},{default:s(()=>[t(k,{ref_key:"usernameRef",ref:U,type:"text",clearable:"",modelValue:o.username,"onUpdate:modelValue":n[1]||(n[1]=l=>o.username=l),placeholder:u(d)("login.Please enter an account")},{prefix:s(()=>[t(m,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),t(g,{prop:"password"},{default:s(()=>[t(k,{ref_key:"passwordRef",ref:N,modelValue:o.password,"onUpdate:modelValue":n[2]||(n[2]=l=>o.password=l),type:"password",placeholder:u(d)("login.Please input a password"),"show-password":""},{prefix:s(()=>[t(m,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),_.showCaptcha?(b(),R(g,{key:0,prop:"captcha"},{default:s(()=>[t(H,{class:"w100",gutter:15},{default:s(()=>[t(z,{span:16},{default:s(()=>[t(k,{ref_key:"captchaRef",ref:T,type:"text",placeholder:u(d)("login.Please enter the verification code"),modelValue:o.captcha,"onUpdate:modelValue":n[3]||(n[3]=l=>o.captcha=l),clearable:"",autocomplete:"off"},{prefix:s(()=>[t(m,{name:"fa fa-ellipsis-h",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["placeholder","modelValue"])]),_:1}),t(z,{span:8},{default:s(()=>[r("img",{onClick:v,class:"captcha-img",src:u(ue)()+"&id="+_.captchaId,alt:""},null,8,Re)]),_:1})]),_:1})]),_:1})):ne("",!0),t(K,{modelValue:o.keep,"onUpdate:modelValue":n[4]||(n[4]=l=>o.keep=l),label:u(d)("login.Hold session"),size:"default"},null,8,["modelValue","label"]),t(g,null,{default:s(()=>[t(W,{loading:o.loading,class:"submit-button",round:"",type:"primary",size:"large",onClick:n[5]||(n[5]=l=>V(y.value))},{default:s(()=>[L(M(u(d)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}});const Ae=he(Le,[["__scopeId","data-v-6d0f9eea"]]);export{Ae as default};
