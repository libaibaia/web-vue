import{h as $,K as b,r as x,p as m,B as u,C as a,W as g,l as j,T as v,U as h,k as e,o as V,q as d,m as w,N as q,$ as E,a2 as G,t as s,Y as p}from"./vue-a98ef309.js";import{b as L,c as P,_ as U}from"./index-0c819fdc.js";import{F as A}from"./index-03bd2479.js";import{b as H}from"./validate-594baa03.js";import"./index-6f00a71d.js";import"./controllerUrls-beb409f8.js";import"./baAccount-2dad18d3.js";import"./IRequests-783be2cd.js";const Y={class:"title"},J=$({__name:"popupForm",setup(M,{expose:K}){b(!1);const c=b(),f=b(),t=G("baTable"),{t:l}=L(),_=x({treeKey:P(),defaultCheckedKeys:[],menuRules:[]}),F=x({name:[H({name:"required",title:l("user.group.Group name")})],auth:[{required:!0,validator:(k,o,r)=>y().length<=0?r(new Error(l("Please select field",{field:l("user.group.jurisdiction")}))):r()}]}),y=()=>c.value.getCheckedKeys().concat(c.value.getHalfCheckedKeys()),N=(k,o)=>{if(o.isLeaf)return"";let r=!0;for(const i in o.childNodes)o.childNodes[i].isLeaf||(r=!1);return r?"penultimate-node":""};return K({getCheckeds:y}),(k,o)=>{const r=s("el-input"),i=s("el-form-item"),R=s("el-tree"),S=s("el-form"),B=s("el-scrollbar"),C=s("el-button"),D=s("el-dialog"),I=p("drag"),z=p("zoom"),T=p("loading"),W=p("blur");return m(),u(D,{class:"ba-operate-dialog",top:"10vh","close-on-click-modal":!1,"model-value":!!e(t).form.operate,onClose:e(t).toggleForm,"destroy-on-close":!0},{header:a(()=>[g((m(),j("div",Y,[v(h(e(t).form.operate?e(l)(e(t).form.operate):""),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[z,".ba-operate-dialog"]])]),footer:a(()=>[V("div",{style:w("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[d(C,{onClick:o[3]||(o[3]=n=>e(t).toggleForm(""))},{default:a(()=>[v(h(e(l)("Cancel")),1)]),_:1}),g((m(),u(C,{loading:e(t).form.submitLoading,onClick:o[4]||(o[4]=n=>e(t).onSubmit(f.value)),type:"primary"},{default:a(()=>[v(h(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[W]])],4)]),default:a(()=>[g((m(),u(B,{class:"ba-table-form-scrollbar"},{default:a(()=>[V("div",{class:E(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:w("width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[d(S,{ref_key:"formRef",ref:f,onKeyup:o[2]||(o[2]=q(n=>e(t).onSubmit(f.value),["enter"])),model:e(t).form.items,"label-position":"right","label-width":e(t).form.labelWidth+"px",rules:F},{default:a(()=>[d(i,{prop:"name",label:e(l)("user.group.Group name")},{default:a(()=>[d(r,{modelValue:e(t).form.items.name,"onUpdate:modelValue":o[0]||(o[0]=n=>e(t).form.items.name=n),type:"string",placeholder:e(l)("Please input field",{field:e(l)("user.group.Group name")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(i,{prop:"auth",label:e(l)("user.group.jurisdiction")},{default:a(()=>[(m(),u(R,{ref_key:"treeRef",ref:c,key:_.treeKey,"default-checked-keys":_.defaultCheckedKeys,"default-expand-all":!0,"show-checkbox":"","node-key":"id",props:{children:"children",label:"title",class:N},data:_.menuRules},null,8,["default-checked-keys","props","data"]))]),_:1},8,["label"]),d(A,{label:e(l)("state"),modelValue:e(t).form.items.status,"onUpdate:modelValue":o[1]||(o[1]=n=>e(t).form.items.status=n),type:"radio",data:{content:{0:e(l)("Disable"),1:e(l)("Enable")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"])]),_:1},8,["model","label-width","rules"])],6)]),_:1})),[[T,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});const ae=U(J,[["__scopeId","data-v-ed76273e"]]);export{ae as default};
