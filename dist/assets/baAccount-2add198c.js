import{h as K,K as S,r as C,p as m,l as w,q as t,C as n,k as e,W as y,o as r,U as c,B,T as _,N as G,t as u,Y as z}from"./vue-a98ef309.js";import{F as U}from"./index-03bd2479.js";import{b as f}from"./validate-594baa03.js";import{b as L,c as $,_ as M}from"./index-0c819fdc.js";import{u as T,b as E,c as O}from"./baAccount-2dad18d3.js";import{s as g}from"./store-532afdd0.js";import"./index-6f00a71d.js";import"./controllerUrls-beb409f8.js";import"./IRequests-783be2cd.js";const W={key:0,class:"userinfo"},Y={class:"user-avatar-box"},j=["src"],H={class:"username"},J={class:"user-integral"},Q={class:"userinfo-buttons"},X={key:1,class:"ba-login"},Z={class:"ba-title"},ee=["src"],oe={target:"_blank",class:"ba-account-register",href:"https://buildadmin.com/user/login?type=register"},ae=K({__name:"baAccount",setup(te){const{t:s}=L(),d=T(),b=S(),a=C({loading:!1,form:{tab:"login",username:"",password:"",captcha:"",captchaId:$(),keep:!1}}),F=C({username:[f({name:"required",title:s("module.User name")})],captcha:[f({name:"required",title:s("module.Verification Code")})],password:[f({name:"required",title:s("module.Password")}),f({name:"password"})]}),q=i=>{window.open(i)},k=(i=void 0)=>{i.validate(o=>{o?(a.loading=!0,O("post",a.form).then(v=>{g.dialog.baAccount=!1,a.loading=!1,d.dataFill(v.data.userInfo)}).catch(()=>{a.loading=!1,h()})):h()})},h=()=>{a.form.captcha="",a.form.captchaId=$()};return(i,o)=>{const v=u("Icon"),p=u("el-button"),x=u("el-input"),V=u("el-col"),D=u("el-row"),I=u("el-form-item"),N=u("el-form"),P=u("el-dialog"),A=z("blur"),R=z("loading");return m(),w("div",null,[t(P,{modelValue:e(g).dialog.baAccount,"onUpdate:modelValue":o[7]||(o[7]=l=>e(g).dialog.baAccount=l),class:"ba-account-dialog",width:"25%",title:e(s)("module.Member information")},{default:n(()=>[e(d).token?y((m(),w("div",W,[r("div",Y,[r("img",{class:"user-avatar",src:e(d).avatar,alt:""},null,8,j),t(v,{class:"user-avatar-gender",name:e(d).getGenderIcon().name,size:"14",color:e(d).getGenderIcon().color},null,8,["name","color"])]),r("p",H,c(e(d).nike),1),r("p",J,[r("span",null,c(i.$t("module.Integral")+" "+e(d).score),1),r("span",null,c(i.$t("module.Balance")+" "+e(d).money),1)]),r("div",Q,[y((m(),B(p,{onClick:o[0]||(o[0]=l=>q("https://buildadmin.com/user/account/moduleOrders")),size:"default",type:"primary"},{default:n(()=>[_(c(i.$t("module.My module")),1)]),_:1})),[[A]]),y((m(),B(p,{onClick:o[1]||(o[1]=l=>e(d).logout()),size:"default",type:"warning"},{default:n(()=>[_(c(i.$t("module.Logout login")),1)]),_:1})),[[A]])])])),[[R,e(g).loading.common]]):(m(),w("div",X,[r("h3",Z,c(e(s)("module.Log in to the buildadmin module marketplace")),1),t(N,{onKeyup:o[6]||(o[6]=G(l=>k(b.value),["enter"])),ref_key:"baAccountFormRef",ref:b,rules:F,class:"ba-account-login-form",model:a.form},{default:n(()=>[t(U,{modelValue:a.form.username,"onUpdate:modelValue":o[2]||(o[2]=l=>a.form.username=l),type:"string",prop:"username",placeholder:e(s)("module.Please enter buildadmin account name or email"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),t(U,{modelValue:a.form.password,"onUpdate:modelValue":o[3]||(o[3]=l=>a.form.password=l),type:"password",prop:"password",placeholder:e(s)("module.Please enter the buildadmin account password"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),t(I,{prop:"captcha"},{default:n(()=>[t(D,{class:"w100"},{default:n(()=>[t(V,{span:16},{default:n(()=>[t(x,{modelValue:a.form.captcha,"onUpdate:modelValue":o[4]||(o[4]=l=>a.form.captcha=l),size:"large",clearable:"",autocomplete:"off",placeholder:e(s)("module.Please enter the login verification code")},null,8,["modelValue","placeholder"])]),_:1}),t(V,{class:"captcha-box",span:8},{default:n(()=>[r("img",{onClick:h,class:"captcha-img",src:e(E)()+"&id="+a.form.captchaId},null,8,ee)]),_:1})]),_:1})]),_:1}),t(I,{class:"form-buttons"},{default:n(()=>[t(p,{onClick:o[5]||(o[5]=l=>k(b.value)),loading:a.loading,round:"",type:"primary",size:"large"},{default:n(()=>[_(c(e(s)("module.Sign in")),1)]),_:1},8,["loading"]),r("a",oe,[t(p,{round:"",plain:"",type:"info",size:"large"},{default:n(()=>[_(c(e(s)("module.Register")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])]))]),_:1},8,["modelValue","title"])])}}});const pe=M(ae,[["__scopeId","data-v-7e0dd64d"]]);export{pe as default};
