import{h as A,K as B,r as D,A as I,p as m,B as d,C as a,W as y,l as N,T as p,U as f,k as e,o as C,q as s,m as x,N as z,S as w,$ as E,a2 as L,t as i,Y as g}from"./vue-a98ef309.js";import{b as T,r as W,_ as j}from"./index-0c819fdc.js";import{b as _,r as K}from"./validate-594baa03.js";import{F as R}from"./index-03bd2479.js";import"./index-6f00a71d.js";import"./controllerUrls-beb409f8.js";import"./baAccount-2dad18d3.js";import"./IRequests-783be2cd.js";const Y={class:"title"},G=A({__name:"popupForm",setup(H){const v=B(),o=L("baTable"),{t:r}=T(),V=D({username:[_({name:"required",title:r("user.user.User name")}),_({name:"account"})],nike:[_({name:"required",title:r("user.user.nike")})],email:[_({name:"email",title:r("user.user.email")})],mobile:[_({name:"mobile"})],password:[{validator:(u,t,n)=>{if(o.form.operate=="add"){if(!t)return n(new Error(r("Please input field",{field:r("user.user.password")})))}else if(!t)return n();return K(t)?n():n(new Error(r("validate.Please enter the correct password")))},trigger:"blur"}]}),k=u=>{o.toggleForm(),W.push({name:u=="money"?"user/moneyLog":"user/scoreLog",query:{user_id:o.form.items.id}})};return I(()=>o.form.operate,u=>{V.password[0].required=u=="add"}),(u,t)=>{const n=i("el-input"),b=i("el-form-item"),c=i("el-button"),U=i("el-form"),F=i("el-scrollbar"),P=i("el-dialog"),S=g("drag"),h=g("zoom"),$=g("loading"),q=g("blur");return m(),d(P,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":!!e(o).form.operate,onClose:e(o).toggleForm},{header:a(()=>[y((m(),N("div",Y,[p(f(e(o).form.operate?e(r)(e(o).form.operate):""),1)])),[[S,[".ba-operate-dialog",".el-dialog__header"]],[h,".ba-operate-dialog"]])]),footer:a(()=>[C("div",{style:x("width: calc(100% - "+e(o).form.labelWidth/1.8+"px)")},[s(c,{onClick:t[8]||(t[8]=l=>e(o).toggleForm(""))},{default:a(()=>[p(f(e(r)("Cancel")),1)]),_:1}),y((m(),d(c,{loading:e(o).form.submitLoading,onClick:t[9]||(t[9]=l=>e(o).onSubmit(v.value)),type:"primary"},{default:a(()=>[p(f(e(o).form.operateIds&&e(o).form.operateIds.length>1?e(r)("Save and edit next item"):e(r)("Save")),1)]),_:1},8,["loading"])),[[q]])],4)]),default:a(()=>[y((m(),d(F,{class:"ba-table-form-scrollbar"},{default:a(()=>[C("div",{class:E(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:x("width: calc(100% - "+e(o).form.labelWidth/2+"px)")},[e(o).form.loading?w("",!0):(m(),d(U,{key:0,ref_key:"formRef",ref:v,onKeyup:t[7]||(t[7]=z(l=>e(o).onSubmit(v.value),["enter"])),model:e(o).form.items,"label-position":"right","label-width":e(o).form.labelWidth+"px",rules:V},{default:a(()=>[s(b,{prop:"username",label:e(r)("user.user.User name")},{default:a(()=>[s(n,{modelValue:e(o).form.items.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).form.items.username=l),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.User name")+"("+e(r)("user.user.Login account")+")"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o).form.operate=="edit"?(m(),d(b,{key:0,label:e(r)("user.user.balance")},{default:a(()=>[s(n,{modelValue:e(o).form.items.money,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).form.items.money=l),readonly:""},{append:a(()=>[s(c,{onClick:t[1]||(t[1]=l=>k("money"))},{default:a(()=>[p(f(e(r)("user.user.Adjustment balance")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):w("",!0),e(o).form.operate=="edit"?(m(),d(b,{key:1,label:e(r)("user.user.integral")},{default:a(()=>[s(n,{modelValue:e(o).form.items.score,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).form.items.score=l),readonly:""},{append:a(()=>[s(c,{onClick:t[3]||(t[3]=l=>k("score"))},{default:a(()=>[p(f(e(r)("user.user.Adjust integral")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):w("",!0),s(b,{prop:"password",label:e(r)("user.user.password")},{default:a(()=>[s(n,{modelValue:e(o).form.items.password,"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).form.items.password=l),type:"password",placeholder:e(o).form.operate=="add"?e(r)("Please input field",{field:e(r)("user.user.password")}):e(r)("user.user.Please leave blank if not modified")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(R,{label:e(r)("state"),modelValue:e(o).form.items.status,"onUpdate:modelValue":t[6]||(t[6]=l=>e(o).form.items.status=l),type:"radio",data:{content:{disable:e(r)("Disable"),enable:e(r)("Enable")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[$,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});const re=j(G,[["__scopeId","data-v-d08f8fa1"]]);export{re as default};
